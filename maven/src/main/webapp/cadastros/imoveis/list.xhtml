<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
                xmlns:ui="http://java.sun.com/jsf/facelets" 
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui">
    
    <ui:define name="title">
        <h:outputText value="Categorias"/>
    </ui:define>
    
    <p:dataTable id="table" widgetVar="table" value="#{categoryController.pagination}" var="item" lazy="true" 
                 rows="5" paginator="true" paginatorPosition="top" sortBy="name"
                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                 currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords}"
                 emptyMessage="Nenhuma categoria cadastrada.">
        
        <p:column headerText="Nome">
            <h:outputText value="#{item.name}"/>
        </p:column>
        
        <p:column headerText="Status" style="width: 100px; text-align: center;">
            <p:selectBooleanButton disabled="true" value="#{item.status}" onLabel=" Ativo" offLabel="Inativo" onIcon="ui-icon-check" offIcon="ui-icon-close"/>
        </p:column>
        
        <p:column headerText="&nbsp;" width="70" style="text-align: center">
            <p:commandButton ajax="false" action="#{categoryController.form(item)}" icon="ui-icon-pencil" title="Editar"/>
            <p:commandButton onclick="cd.show();" icon="ui-icon-trash" title="Remover">
                <f:setPropertyActionListener target="#{categoryController.categoryForRemoval}" value="#{item}"/>
            </p:commandButton>
        </p:column>
    </p:dataTable>
    <p:confirmDialog id="removeDialog" message="Tem certeza que deseja remover a categoria '#{categoryController.categoryForRemoval.name}'?" header="Confirmar remoção" severity="alert" widgetVar="cd">
        <p:commandButton value="Sim" action="#{categoryController.remove}" ajax="false"/>
        <p:commandButton value="Cancelar" onclick="cd.hide();" type="button"/>
    </p:confirmDialog>
</ui:composition>